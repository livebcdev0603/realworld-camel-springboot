<route id="direct_createArticle">
  <from uri="direct:createArticle"/>

  <setProperty name="__tags">
    <simple>${body.tagList}</simple>
  </setProperty>

  <marshal><json /></marshal>
  <to uri="jslt:classpath:jslt/create-article-req2db.jslt" />

  <unmarshal><json library="Jackson" unmarshalType="com.github.jacekszymanski.realcamel.entity.Article" /></unmarshal>

  <script>
    <groovy>
      exchange.properties.'__tags'.each { request.body.addTag(it) }
    </groovy>
  </script>

  <to uri="jpa:com.github.jacekszymanski.realcamel.entity.Article" />

  <marshal><json /></marshal>


</route>
