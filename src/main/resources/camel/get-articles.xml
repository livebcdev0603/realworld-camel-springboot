<route id="direct_getArticles"
  routeConfigurationId="maybe-verify-login,generic-error"
  xmlns="http://camel.apache.org/schema/spring">

  <from uri="direct:getArticles" />

  <setProperty name="__jpa_query">
    <groovy>resource:classpath:scripts/article-feed-query.groovy</groovy>
  </setProperty>

  <log message="Querying for articles: ${exchangeProperty.__jpa_query} with params ${headers.CamelJpaParameters}" />

  <toD uri="xjpa:org.example.model.Article?query=${exchangeProperty.__jpa_query}&amp;firstResult=${header.CamelXJpaFirstResult}&amp;maximumResults=${header.CamelXJpaMaximumResults}" />

  <log message="Found ${body.size} articles" />
</route>
